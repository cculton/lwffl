<!-- LWFFL NAV (drop-in) -->
<link rel="stylesheet" href="nav.css" />

<header class="lwffl-header">
  <div class="lwffl-header__inner">
    <a class="lwffl-brand" href="index.html" aria-label="LWFFL Records Home">
      <span class="lwffl-brand__wordmark">LWFFLRECORDS</span>
      <span class="lwffl-brand__dot" aria-hidden="true"></span>
    </a>

    <button class="lwffl-nav-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>

    <nav class="lwffl-nav" aria-label="Primary">
      <ul class="lwffl-nav__list">
        <li class="lwffl-nav__item">
          <details class="lwffl-details">
            <summary class="lwffl-nav__trigger">
              Administrative
              <span class="lwffl-caret" aria-hidden="true">▼</span>
            </summary>

            <div class="lwffl-dropdown" role="menu">
              <div class="lwffl-dropdown__section">
                <div class="lwffl-dropdown__title">League</div>
                <a class="lwffl-dropdown__link" href="constitution.html">Constitution <span class="lwffl-dropdown__hint">Doc</span></a>
                <a class="lwffl-dropdown__link" href="amendments.html">Amendment History <span class="lwffl-dropdown__hint">Votes</span></a>
              </div>
            </div>
          </details>
        </li>

        <li class="lwffl-nav__item">
          <details class="lwffl-details">
            <summary class="lwffl-nav__trigger">
              Stats &amp; Records
              <span class="lwffl-caret" aria-hidden="true">▼</span>
            </summary>

            <div class="lwffl-dropdown" role="menu">
              <div class="lwffl-dropdown__section">
                <div class="lwffl-dropdown__title">Managers</div>
                <a class="lwffl-dropdown__link" href="manager-profiles.html">Manager Profiles <span class="lwffl-dropdown__hint">Ratings</span></a>
                <a class="lwffl-dropdown__link" href="career-records.html">Career Records <span class="lwffl-dropdown__hint">All-time</span></a>
                <a class="lwffl-dropdown__link" href="head-to-head.html">Head-to-Head <span class="lwffl-dropdown__hint">Matchups</span></a>
              </div>
            </div>
          </details>
        </li>

        <li class="lwffl-nav__item lwffl-nav__item--right">
          <details class="lwffl-details">
            <summary class="lwffl-nav__trigger">
              Amusement
              <span class="lwffl-caret" aria-hidden="true">▼</span>
            </summary>

            <div class="lwffl-dropdown" role="menu">
              <div class="lwffl-dropdown__section">
                <div class="lwffl-dropdown__title">Extras</div>
                <a class="lwffl-dropdown__link" href="rivalries.html">Rivalries <span class="lwffl-dropdown__hint">Heat</span></a>
                <a class="lwffl-dropdown__link" href="playoff-history.html">Playoff History <span class="lwffl-dropdown__hint">Brackets</span></a>
              </div>
            </div>
          </details>
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
  // LWFFL NAV behavior (mobile + click-outside + ESC)
  (function(){
    const toggle = document.querySelector('.lwffl-nav-toggle');
    const nav = document.querySelector('.lwffl-nav');
    const details = Array.from(document.querySelectorAll('.lwffl-details'));

    function closeAllDetails(except){
      details.forEach(d => { if(d !== except) d.removeAttribute('open'); });
    }

    // Mobile hamburger
    if(toggle && nav){
      toggle.addEventListener('click', () => {
        const isOpen = nav.classList.toggle('is-open');
        toggle.setAttribute('aria-expanded', String(isOpen));
        if(!isOpen) closeAllDetails();
      });
    }

    // Only one dropdown open at a time (click)
    details.forEach(d => {
      d.addEventListener('toggle', () => {
        if(d.open) closeAllDetails(d);
      });
    });

    // Click outside closes dropdowns (and mobile nav)
    document.addEventListener('click', (e) => {
      const header = document.querySelector('.lwffl-header');
      if(!header) return;
      if(!header.contains(e.target)){
        closeAllDetails();
        if(nav && nav.classList.contains('is-open')){
          nav.classList.remove('is-open');
          if(toggle) toggle.setAttribute('aria-expanded', 'false');
        }
      }
    });

    // ESC closes
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){
        closeAllDetails();
        if(nav && nav.classList.contains('is-open')){
          nav.classList.remove('is-open');
          if(toggle) toggle.setAttribute('aria-expanded', 'false');
        }
      }
    });
  })();
</script>
